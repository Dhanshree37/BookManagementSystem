[{"D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\index.js":"1","D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\App.js":"2","D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\pages\\Books\\Books.jsx":"3","D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\pages\\Home\\Home.jsx":"4","D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\pages\\Books\\EditBook.jsx":"5","D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\pages\\Books\\AddBook.jsx":"6","D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\components\\Navbar\\Navbar.jsx":"7","D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\service\\api.js":"8"},{"size":254,"mtime":1726232536679,"results":"9","hashOfConfig":"10"},{"size":703,"mtime":1726232536660,"results":"11","hashOfConfig":"10"},{"size":6553,"mtime":1726424131144,"results":"12","hashOfConfig":"10"},{"size":659,"mtime":1726232536818,"results":"13","hashOfConfig":"10"},{"size":5697,"mtime":1726681525564,"results":"14","hashOfConfig":"10"},{"size":5505,"mtime":1726682759581,"results":"15","hashOfConfig":"10"},{"size":1904,"mtime":1726419661712,"results":"16","hashOfConfig":"10"},{"size":2283,"mtime":1726325672613,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","suppressedMessages":"20","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"21"},"ssugbz",{"filePath":"22","messages":"23","suppressedMessages":"24","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"21"},{"filePath":"25","messages":"26","suppressedMessages":"27","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"28"},{"filePath":"29","messages":"30","suppressedMessages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"21"},{"filePath":"32","messages":"33","suppressedMessages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","suppressedMessages":"37","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","suppressedMessages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","suppressedMessages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\index.js",[],[],[],"D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\App.js",[],[],"D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\pages\\Books\\Books.jsx",["45"],[],"import React, { useState, useEffect } from \"react\";\r\nimport { getBooks, deleteBook } from \"../../service/api\";\r\nimport \"./books.css\";\r\nimport \"animate.css\";\r\n// import '../../../../server/uploads/1726320923221.pdf';\r\n\r\nconst Books = () => {\r\n  const [books, setBooks] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [filteredBooks, setFilteredBooks] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [sortOrder, setSortOrder] = useState(\"asc\");\r\n  const [sortBy, setSortBy] = useState(\"none\");\r\n\r\n  useEffect(() => {\r\n    getAllBooks();\r\n  }, []);\r\n\r\n  const getAllBooks = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await getBooks();\r\n      console.log(\"Book details:\", response.data);\r\n      const sortedBooks = sortBooks(response.data, sortBy, sortOrder);\r\n      setBooks(sortedBooks);\r\n      setFilteredBooks(sortedBooks);\r\n    } catch (error) {\r\n      console.error(\"Error fetching books:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const sortBooks = (booksArray, sortBy, order) => {\r\n    if (sortBy === \"none\") return booksArray;\r\n    return booksArray.slice().sort((a, b) => {\r\n      if (sortBy === \"pages\") {\r\n        return order === \"asc\"\r\n          ? a.no_of_pages - b.no_of_pages\r\n          : b.no_of_pages - a.no_of_pages;\r\n      } else if (sortBy === \"date\") {\r\n        return order === \"asc\"\r\n          ? new Date(a.published_at) - new Date(b.published_at)\r\n          : new Date(b.published_at) - new Date(a.published_at);\r\n      }\r\n      return 0;\r\n    });\r\n  };\r\n\r\n  const viewPdf = (file) => {\r\n    window.open(`http://localhost:8082/pdfs/${file}`, '_blank');\r\n  };\r\n\r\n  const scrollToTop = () => {\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const deleteBookFromCollection = async (id) => {\r\n    try {\r\n      const response = await deleteBook(id);\r\n      document.querySelector(\".modal-text\").textContent = response.data.message;\r\n      document.querySelector(\".modal\").classList.remove(\"hide-modal\");\r\n      scrollToTop();\r\n      getAllBooks();\r\n    } catch (error) {\r\n      console.error(\"Error deleting book:\", error);\r\n    }\r\n  };\r\n\r\n  const closeModal = () => {\r\n    document.querySelector(\".modal\").classList.add(\"hide-modal\");\r\n    scrollToTop();\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    const query = e.target.value;\r\n    setSearchQuery(query);\r\n    filterBooks(query);\r\n  };\r\n\r\n  const filterBooks = (query) => {\r\n    let filtered = books;\r\n    if (query) {\r\n      filtered = books.filter(\r\n        (book) =>\r\n          book.title.toLowerCase().includes(query.toLowerCase()) ||\r\n          book.author.toLowerCase().includes(query.toLowerCase()) ||\r\n          (book.genre && book.genre.toLowerCase().includes(query.toLowerCase()))\r\n      );\r\n    }\r\n    setFilteredBooks(sortBooks(filtered, sortBy, sortOrder));\r\n  };\r\n\r\n  const handleSortOptionsChange = (e) => {\r\n    const [by, order] = e.target.value.split(\":\");\r\n    setSortBy(by);\r\n    setSortOrder(order);\r\n    setFilteredBooks(sortBooks(filteredBooks, by, order));\r\n  };\r\n\r\n  return (\r\n    <section className=\"books-page animate__animated animate__backInDown\">\r\n      <h1>Books Collection</h1>\r\n\r\n      <div className=\"search-container\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search by title, author or genre...\"\r\n          value={searchQuery}\r\n          onChange={handleSearch}\r\n          aria-label=\"Search\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"sort-container\">\r\n        <label htmlFor=\"sortOptions\">Sort by: </label>\r\n        <select id=\"sortOptions\" onChange={handleSortOptionsChange}>\r\n          <option value=\"none\">Default</option>\r\n          <option value=\"pages:asc\">Pages: Low to High</option>\r\n          <option value=\"pages:desc\">Pages: High to Low</option>\r\n          <option value=\"date:asc\">Publish Date: Old to New</option>\r\n          <option value=\"date:desc\">Publish Date: New to Old</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"books-container\">\r\n        <div className=\"modal hide-modal animate__animated animate__tada\">\r\n          <button className=\"close-btn\" onClick={closeModal}>\r\n            X\r\n          </button>\r\n          <p className=\"modal-text\"></p>\r\n          <a href=\"/books\">\r\n            <button className=\"nav-back-btn\">Back to Collection</button>\r\n          </a>\r\n        </div>\r\n\r\n        {loading && <p>Loading...</p>}\r\n\r\n        {filteredBooks.length > 0 ? (\r\n          filteredBooks.map((book) => (\r\n            <div className=\"book-card\" key={book.id}>\r\n              <div className=\"book-card-header\">\r\n                <h2>\r\n                  Title: <span className=\"light-text\">{book.title}</span>\r\n                </h2>\r\n                <h3>\r\n                  Author: <span className=\"light-text\">{book.author}</span>\r\n                </h3>\r\n                <h4>\r\n                  Number of Pages:{\" \"}\r\n                  <span className=\"light-text\">{book.no_of_pages}</span>\r\n                </h4>\r\n                <h4>\r\n                  Publish Date:{\" \"}\r\n                  <span className=\"light-text\">{book.published_at}</span>\r\n                </h4>\r\n                <h4>\r\n                  Genre:{\" \"}\r\n                  <span className=\"light-text\">\r\n                    {book.genre || \"Not available\"}\r\n                  </span>\r\n                </h4>\r\n                <h4>\r\n                  Reading Status: <span className='light-text'>{book.reading_status || 'Not available'}</span>\r\n                </h4>\r\n                {book.pdf && (\r\n                  <button className=\"view-pdf\" onClick={() => viewPdf(book.pdf)}>\r\n                    View pdf\r\n                  </button>\r\n                )}\r\n              </div>\r\n              \r\n              <div className=\"book-card-buttons\">\r\n                <a href={`books/editBook/${book.id}`}>\r\n                  <button className=\"book-card-button edit-btn\">Edit</button>\r\n                </a>\r\n                <button\r\n                  className=\"book-card-button remove-btn\"\r\n                  onClick={() => deleteBookFromCollection(book.id)}\r\n                >\r\n                  Remove\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"book-card\">\r\n            <div className=\"book-card-header\">\r\n              <h2 className=\"light-text\">No results found</h2>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Books;\r\n","D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\pages\\Home\\Home.jsx",[],[],"D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\pages\\Books\\EditBook.jsx",[],[],"D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\pages\\Books\\AddBook.jsx",[],[],"D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\components\\Navbar\\Navbar.jsx",[],[],"D:\\Dhanshree\\SEM VII Practicals\\ROSPL\\bookmanagementsystem-main\\client\\src\\service\\api.js",[],[],[],{"ruleId":"46","severity":1,"message":"47","line":17,"column":6,"nodeType":"48","endLine":17,"endColumn":8,"suggestions":"49"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getAllBooks'. Either include it or remove the dependency array.","ArrayExpression",["50"],{"desc":"51","fix":"52"},"Update the dependencies array to be: [getAllBooks]",{"range":"53","text":"54"},[600,602],"[getAllBooks]"]