{"ast":null,"code":"import axios from \"axios\";\nconst URL = \"http://localhost:8082\";\nexport const getBooks = async () => {\n  try {\n    return await axios.get(`${URL}/books`);\n  } catch (error) {\n    console.error(\"Error while calling get books API\", error);\n    throw error;\n  }\n};\nexport const getBook = async id => {\n  try {\n    return await axios.get(`${URL}/books/editBook/${id}`);\n  } catch (error) {\n    console.error(\"Error while calling get book API\", error);\n    throw error;\n  }\n};\nexport const editBook = async bookDetails => {\n  try {\n    // Ensure the formData is constructed correctly\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data' // Set content type to handle file uploads\n      }\n    };\n\n    // Construct the formData if not already done\n    if (!(bookDetails instanceof FormData)) {\n      const formData = new FormData();\n      Object.keys(bookDetails).forEach(key => {\n        formData.append(key, bookDetails[key]);\n      });\n      bookDetails = formData;\n    }\n\n    // Perform the PUT request\n    const response = await axios.put(`${URL}/books/editBook/${bookDetails.get('id')}`, bookDetails, config);\n    return response;\n  } catch (error) {\n    if (error.response) {\n      console.error(\"Error response:\", error.response.data); // Log response errors\n    } else if (error.request) {\n      console.error(\"Error request:\", error.request); // Log request errors\n    } else {\n      console.error(\"Error message:\", error.message); // Log other errors\n    }\n\n    throw error;\n  }\n};\n\n// Updated addBook function to handle PDF upload\nexport const addBook = async formData => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data' // Set content type to handle file uploads\n      }\n    };\n\n    return await axios.post(`${URL}/books/addBook`, formData, config);\n  } catch (error) {\n    console.error(\"Error while calling add book API\", error.response ? error.response.data : error.message);\n    throw error;\n  }\n};\nexport const deleteBook = async id => {\n  try {\n    return await axios.delete(`${URL}/books/${id}`);\n  } catch (error) {\n    console.error(\"Error while calling delete book API\", error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","URL","getBooks","get","error","console","getBook","id","editBook","bookDetails","config","headers","FormData","formData","Object","keys","forEach","key","append","response","put","data","request","message","addBook","post","deleteBook","delete"],"sources":["D:/Dhanshree/SEM VII Practicals/ROSPL/bookmanagementsystem-main/client/src/service/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst URL = \"http://localhost:8082\";\r\n\r\nexport const getBooks = async () => {\r\n  try {\r\n    return await axios.get(`${URL}/books`);\r\n  } catch (error) {\r\n    console.error(\"Error while calling get books API\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getBook = async (id) => {\r\n  try {\r\n    return await axios.get(`${URL}/books/editBook/${id}`);\r\n  } catch (error) {\r\n    console.error(\"Error while calling get book API\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const editBook = async (bookDetails) => {\r\n  try {\r\n    // Ensure the formData is constructed correctly\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data' // Set content type to handle file uploads\r\n      }\r\n    };\r\n\r\n    // Construct the formData if not already done\r\n    if (!(bookDetails instanceof FormData)) {\r\n      const formData = new FormData();\r\n      Object.keys(bookDetails).forEach(key => {\r\n        formData.append(key, bookDetails[key]);\r\n      });\r\n      bookDetails = formData;\r\n    }\r\n\r\n    // Perform the PUT request\r\n    const response = await axios.put(`${URL}/books/editBook/${bookDetails.get('id')}`, bookDetails, config);\r\n    return response;\r\n  } catch (error) {\r\n    if (error.response) {\r\n      console.error(\"Error response:\", error.response.data); // Log response errors\r\n    } else if (error.request) {\r\n      console.error(\"Error request:\", error.request); // Log request errors\r\n    } else {\r\n      console.error(\"Error message:\", error.message); // Log other errors\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Updated addBook function to handle PDF upload\r\nexport const addBook = async (formData) => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data' // Set content type to handle file uploads\r\n      }\r\n    };\r\n    return await axios.post(`${URL}/books/addBook`, formData, config);\r\n  } catch (error) {\r\n    console.error(\"Error while calling add book API\", error.response ? error.response.data : error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const deleteBook = async (id) => {\r\n  try {\r\n    return await axios.delete(`${URL}/books/${id}`);\r\n  } catch (error) {\r\n    console.error(\"Error while calling delete book API\", error);\r\n    throw error;\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}